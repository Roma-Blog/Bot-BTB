# Бот для мониторинга баланса в Яндекс Директ 

## Возможности
* Отправляет остаток на счете условному клиенту или вам каждый день в заданое время. Есть возможность учитывать часовые пояса местонахождения пользователя. 
* Есть возможность спросить баланс убота в любое время, но сам баланс обнавляется кадый час. 

## Как настроить 
* Нужно зайти найти в телеграм @BotFather и зарегестрировать нового бота. Там вы получите токен для него.
* Скачиваем репозиторий в папку. 
* Нужно будет установать модули: **telebot** для ботат телеграм и **requests** что бы отправлять запросы к API Яндекс Директа.
* В этой же папке проекта создаем файлы: data.json, config.py

Добовляем в config.py следующие строки
```
token_bot = '4984' #Токен телеграм бота   
time_mailing = 9 #Время когда нужно делать рассылку  с информацией побалансу

```

Добовляем в data.json следующие строки 

```
{
    "Проект 1": {
        "token": "",
        "login": "",
        "agent_account": false,
        "balance": 0,
        "account_id": ["123456789"],
        "time_zone": 0
    },
    "Проект 2": {
        "token": "",
        "login": "",
        "agent_account": true,
        "balance": 0,
        "account_id": ["123456789"],
        "time_zone": 0
    },
    "admin": {
        "account_id": "123456789"
    }
}
```
На месте названий Проект 1 и Проект 2 должны быть осмысленные названия. Рекомендую такой формат "site.ru", так как пользователю будет приходить сообщение, где будет указваться название проекта. 

**token** - это токен для доступа к API Яндекс директа у агентского аккаунта он единый у самостоятельных аккаунтов он у каждого свой.

**login** Нужен для агентского аккаунта. 

**agent_account** если аккаунт агентский то true если нет то false

**balance** необязательно сразу указывать. 

**account_id** Это массив ID аккаунтов в телеграм которым нужно отправлять баланс проекта во время рассылки, узнать его можно с помощью этого же бота. Просите клиента отправить вам его ID, после чего останавливайте бота вносите его в массив и снова запускайте бота. 

**time_zone** - это разница в часаз мужду часовыми поясами. Основной часовой пояс считается тот где находится сервер с запущеным ботом. Например если юот запущен в Новосибирске то он и работает по Новосибирскому времени. И если нужно отправть клинту в Иркутске в 9 часов утра баланс, то  у них -1 относительно Новосибирска. Усли в Омск то у них +1 относительно Новосибирска

**admin** - это вы нужно указать свой телеграм ID, узнать его можно с помощью этого же бота. Вам будет приходить информация об ошибках в случае чего. 

# Бот для мониторинга баланса в Яндекс Директ 

## Возможности
* Отправляет остаток на счете условного клиента или вам каждый день в заданное время. Есть возможность учитывать часовые пояса местонахождения пользователя. 
* Есть возможность спросить баланс у бота в любое время, но сам баланс обновляется каждый час. Будет браться из "базы данных".

## Как настроить 
* Нужно зайти в телеграме в **@BotFather** и зарегистрировать нового бота. Там вы получите токен для него.
* Скачиваем репозиторий в папку. 
* Нужно будет установать модули: **telebot** для ботат телеграм и **requests** чтобы отправлять запросы к API Яндекс Директа
* В этой же папке проекта создаем файлы: data.json, config.py

Добовляем в config.py следующие строки
```
token_bot = '4984' #Токен телеграм бота   
time_mailing = 9 #Время когда нужно делать рассылку  с информацией по балансу. Тип Int

```

Добовляем в data.json следующие строки 

```
{
    "Проект 1": {
        "token": "",
        "login": "",
        "agent_account": false,
        "balance": 0,
        "account_id": ["123456789"],
        "time_zone": 0
    },
    "Проект 2": {
        "token": "",
        "login": "",
        "agent_account": true,
        "balance": 0,
        "account_id": ["123456789"],
        "time_zone": 0
    },
    "admin": {
        "account_id": "123456789"
    }
}
```
На месте названия “Проект 1” и “Проект 2” должны быть осмысленные имена. Рекомендую использовать формат “site.ru”, чтобы пользователю было понятно, о каком проекте идет речь в приходящем сообщении.

**token** - это токен для доступа к API Яндекса Директа. У агентского аккаунта он общий, у самостоятельных аккаунтов - свой у каждого.

**login** Нужен для агентского аккаунта. 

**agent_account** если аккаунт агентский то true, если нет то false

**balance** необязательно сразу указывать. 

**account_id** Это массив ID аккаунтов телеграма, которым нужно отправлять баланс проекта при рассылке. Узнать его можно с помощью того же бота. Попросите клиента отправить вам его ID. Затем остановите бота, добавьте его в массив и запустите бота снова.

**time_zone** - это разница в часах между часовыми поясами. Основным часовым поясом считается тот, где находится сервер с запущенным ботом. Например, если бот запущен в Новосибирске, то он работает по новосибирскому времени. Если нужно отправить клиенту в Иркутске в 9 утра баланс, то для них -1 по сравнению с Новосибирском. Если в Омске, то для них +1 по сравнению с Новосибирском.

**admin** - это вы нужно указать свой телеграм ID, узнать его можно с помощью этого же бота. Вам будет приходить информация об ошибках в случае чего. 
